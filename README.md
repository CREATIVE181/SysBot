# Telegram Server Monitoring Bot

## Описание

Этот бот предназначен для мониторинга и удалённого управления сервером через Telegram. Он предоставляет функциональность для выполнения команд, получения информации о состоянии системы, управления SSH-ключами, загрузки файлов и других административных задач.

## Возможности

- Получение текущего состояния сервера (CPU, RAM, диск, температура процессора).
- Выполнение произвольных команд на сервере.
- Просмотр топа процессов по потреблению ресурсов.
- Просмотр сетевых соединений (netstat).
- Просмотр сетевого трафика (через vnStat).
- Управление SSH-ключами (добавление и удаление).
- Загрузка файлов на сервер.
- Перезагрузка сервера.
- Просмотр логов бота.
- Информация о системе.

## Установка и настройка

1. **Клонирование репозитория**

```bash
git clone <репозиторий>
cd <папка_проекта>
```

2. **Создание и настройка виртуального окружения (опционально)**

```bash
python3 -m venv venv
source venv/bin/activate
```

3. **Установка зависимостей**

```bash
pip install -r requirements.txt
```

4. **Создание `.env` файла**

Создайте файл `.env` в корне проекта и добавьте в него:

```
TOKEN=ваш_telegram_bot_token
USER_ID=ваш_telegram_user_id
```

5. **Запуск бота**

```bash
python3 main.py
```

## Использование

После запуска бота доступны следующие команды:

- `/start` — Запуск бота.
- `/help` — Список доступных команд.
- `/status` — Состояние сервера.
- `/c <команда>` — Выполнение произвольной команды.
- `/top` — Топ 5 процессов по нагрузке.
- `/netstat` — Сетевые соединения.
- `/traffic` — Сетевой трафик.
- `/ssh <add|remove> <публичный_ключ>` — Управление SSH-ключами.
- `/file` — Загрузка файла.
- `/reboot` — Перезагрузка сервера.
- `/logs` — Последние 10 строк логов бота.
- `/sysinfo` — Информация о системе.

## Зависимости

- Python 3.8+
- aiogram
- psutil
- python-dotenv

## Требования к серверу

- Установленные утилиты:
  - `vnstat` (для /traffic)
  - `netstat` (обычно в составе `net-tools`)
- Доступ к системным файлам температуры (если используется температура процессора).

## Безопасность

- Бот ограничен одним пользователем по `USER_ID`, указанному в `.env`.
- Все команды логируются в `bot.log`.

## Логи

Файл логов `bot.log` создаётся автоматически и сохраняет все действия пользователя и возможные ошибки.

## Папка для загрузок

Все загруженные файлы сохраняются в папку `Downloads`, которая создаётся автоматически.

## Автозапуск (по желанию)

Вы можете добавить бот в автозапуск через systemd или supervisor для автоматического запуска при старте сервера.

Пример для systemd:

```ini
[Unit]
Description=Telegram Server Monitor Bot
After=network.target

[Service]
ExecStart=/usr/bin/python3 /путь/к/main.py
WorkingDirectory=/путь/к/папке_проекта
Restart=always
User=root

[Install]
WantedBy=multi-user.target
```

---

© 2024 Telegram Server Monitoring Bot

